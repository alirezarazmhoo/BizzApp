@model BizApp.Areas.Admin.Models.CreateBusinessViewModel

@{
	ViewData["Title"] = "Index";
}

<div class="content-header">
	<h1 style="float:right">
		مدیریت کسب و کارها
	</h1>
	<ol class="breadcrumb">
		<li><a href="#"><i class="fa fa-home"></i> خانه</a></li>
		<li class="active">کسب و کارها</li>
		<li class="active">جدید</li>
	</ol>
</div>


<div class="row">
	<div class="col-sm-12">
		@using (Html.BeginForm("Index", "Businesses", FormMethod.Post))
		{
			<div class="box zmdi-border-color" style="height:auto; padding:5px; margin: 5px;">
				<div class="box-body table-responsive no-padding row ">
					<div style="width:90%;margin-right:40px;margin-top:10px">
						<div class="form-row">
							<div class="form-group col-md-12">
								<label for="Name">نام کسب و کار</label>
								<input id="Name" name="Name" placeholder="نام کسب و کار را وارد کنید" class="form-control" aria-describedby="namelHelp">
								<small id="nameHelp" class="form-text text-muted">نام مناسب با کسب و کار خود را تا حداکثر 50 کاراکتر وارد کنید</small>
							</div>

							<div class="form-group col-md-6">
								<label for="DistrictId">انتخاب منطقه</label>
								<select id="provinceId" name="provinceId" class="form-control"
										asp-items="@(new SelectList(ViewBag.Provinces, "ProvinceId", "Name"))">
									<option value="0">لطفا شهرستان را انتخاب کنید</option>
								</select>
								<select id="cityId" name="cityId" class="form-control" style="margin: 2px 0;">
									<option>لطفا شهر را انتخاب کنید</option>
								</select>
								<select id="districtId" name="districtId" class="form-control" style="margin: 2px 0;">
									<option>لطفا ناحیه را انتخاب کنید</option>
								</select>
							</div>

							<div class="form-group col-md-6">
								<label for="DistrictId">دسته</label>
								<select id="categoryId" name="categoryId" class="form-control">
									<option value="0">لطفا دسته بندی را انتخاب کنید</option>
								</select>
							</div>

							<div class="form-group">
								<textarea name="descritpion" id="description" class="form-control" placeholder="توضیحات"></textarea>
							</div>
							<div class="form-group col-md-6">
								<label for="websiteurl">آدرس وبسایت</label>
								<input id="websiteurl" name="websiteurl" placeholder="آدرس وبسایت را وارد کنید" class="form-control" aria-describedby="websiteurlHelp">
								<small id="websiteurlHelp" class="form-text text-muted">مثال: sitename.com</small>
							</div>
							<div class="form-group col-md-6">
								<label for="address">نشانی کسب و کار</label>
								<input id="address" name="address" placeholder="نشانی کسب و کار را وارد کنید" class="form-control" >
							</div>

						</div>
					</div>
				</div>
				<div style="margin-top:20px">
					<button style="margin-right:20px;" type="submit" class="btn btn-primary">ذخیره کسب و کار</button>
				</div>
			</div>
		}
	</div>
</div>


<script type="text/javascript">
	$(document).ready(function () {

		$("#provinceId").change(function () {
			// clear city dropdownl
			$('#cityId').empty();

			// set default value
			var nonVauleItem = '<option value="0">لطفا شهر را انتخاب کنید</option>';
			$('#cityId').html(nonVauleItem);

			// check if province not selected
			if (this.value == '0') return;

			var url = '/admin/city/getcities';

			$.getJSON(url, { provinceId: this.value }, function (data) {
				var items = nonVauleItem;
				
				$.each(data, function (i, model) {
					items += '<option value="' + model.value + '">' + model.text + '</option>';
				});

				$('#cityId').html(items);
			});
		});

		$("#cityId").change(function () {
			// clear district dropdown
			$('#districtId').empty();

			// set default value for dropdwon
			var nonVauleItem = '<option value="0">لطفا ناحیه را انتخاب کنید</option>';
			$('#districtId').html(nonVauleItem);

			// check if province not selected
			if (this.value == '0') return;

			var url = '/admin/district/getdistricts';

			$.getJSON(url, { cityId: this.value }, function (data) {
				var items = nonVauleItem;
				
				$.each(data, function (i, model) {
					items += '<option value="' + model.value + '">' + model.text + '</option>';
				});

				$('#districtId').html(items);
			});
		});

	});
</script>
