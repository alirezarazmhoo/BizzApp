@model BizApp.Models.Basic.SearchViewModel

@{
    Layout = "_AllPagesLayout";
}
<style>
    .leaflet-div-icon {
        background: transparent;
        border: none;
    }

    .leaflet-marker-icon .number {
        position: relative;
        top: -37px;
        font-size: 16px;
        width: 25px;
        text-align: center;
    }

    .lbl-cat {
        padding: 5px;
        background-color: #f5f5f5;
        border-radius: 2px;
        cursor: pointer;
        /*margin:5px;*/
    }

    .button-cat {
        color: #fff;
        background: #d32323;
        padding: 0 35px;
        line-height: 36px;
        border: none;
        border-radius: 3px;
        font-size: 13px;
        font-weight: 600;
        display: inline-block;
    }
</style>
<section class="category-content">
    <div class="category-content__sidebar">
        <div class="category-content__filter-mobail">
            <div class="category-content__filter-mobail__button-filter">
                <a href="#">فیلتر</a>
            </div>
            <div class="category-content__filter-mobail__button-list">
                <div class="category-content__filter-mobail__button-list__list">
                    <a href="#" class="active">لیست</a>
                </div>
                <div class="category-content__filter-mobail__button-list__map">
                    <a href="#">نقشه</a>
                </div>
            </div>
        </div>
        <div class="category-content__item-filter">
            <div class="category-content__item-filter__filter">
                <h3>فیلتر</h3>
                <div class="category-content__item-filter__filter__number">
                    <ul>
                        <li><a href="#">1</a></li>
                        <li><a href="#">2</a></li>
                        <li><a href="#">3</a></li>
                        <li><a href="#">4</a></li>
                    </ul>
                </div>
            </div>
            <div class="category-content__item-filter__proposal">
                <div class="category-content__item-filter__proposal__title">
                    <h3>پیشنهاد شده</h3>
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="exampleCheck1">
                    <label class="form-check-label" for="exampleCheck1">اکنون باز شده است</label>
                    <span class="span">14:18</span>
                </div>
            </div>
            <div class="category-content__item-filter__property">
                <div class="category-content__item-filter__property__title">
                    <h3>دسته بندی</h3>
                </div>

                @foreach (var item in Model.categories.Take(4))
                {

                    <p class="lbl-cat" onclick="SearchByCat(@item.Id)">@item.Name</p>


                }
                <div class="category-content__item-filter__property__all">
                    <a href="#" data-toggle="modal" data-target="#click-cat">نمایش همه</a>
                </div>
            </div>
            <div class="category-content__item-filter__property">
                <div class="category-content__item-filter__property__title">
                    <h3>ویژگی ها</h3>
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="exampleCheck1">
                    <label class="form-check-label" for="exampleCheck1">WLAN بصورت رایگان</label>
                </div>
                <div class="category-content__item-filter__property__all">
                    <a href="#">نمایش همه</a>
                </div>
            </div>
            <div class="category-content__item-filter__areas">
                <div class="category-content__item-filter__areas__title">
                    <h3>مناطق</h3>
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="exampleCheck1">
                    <label class="form-check-label" for="exampleCheck1">WLAN بصورت رایگان</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="exampleCheck1">
                    <label class="form-check-label" for="exampleCheck1">WLAN بصورت رایگان</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="exampleCheck1">
                    <label class="form-check-label" for="exampleCheck1">WLAN بصورت رایگان</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="exampleCheck1">
                    <label class="form-check-label" for="exampleCheck1">WLAN بصورت رایگان</label>
                </div>
                <div class="category-content__item-filter__areas__all">
                    <a href="#">نمایش همه</a>
                </div>
            </div>
            <div class="category-content__item-filter__distance">
                <div class="category-content__item-filter__distance__title">
                    <h3>مسافت</h3>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios2"
                           value="option2">
                    <label class="form-check-label" for="exampleRadios2">
                        از دید پرنده
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios2"
                           value="option2">
                    <label class="form-check-label" for="exampleRadios2">
                        از دید پرنده
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios2"
                           value="option2">
                    <label class="form-check-label" for="exampleRadios2">
                        از دید پرنده
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios2"
                           value="option2">
                    <label class="form-check-label" for="exampleRadios2">
                        از دید پرنده
                    </label>
                </div>
            </div>
        </div>
    </div>
    <div class="category-content__item">
        <div class="category-content__item__title">
            <div class="category-content__item__title__top">
                <a href="#">برلین</a>
                <svg width="16" height="16" class="icon_svg">
                    <path d="M6.5 12.05a1 1 0 01-.7-.28 1 1 0 010-1.42L8.1 8 5.79 5.65a1 1 0 111.42-1.41l3 3.06a1 1 0 010 1.4l-3 3.06a1 1 0 01-.71.29z">
                    </path>
                </svg>
                <a href="#">وسایل نقلیه</a>
            </div>
            <div class="category-content__item__title__bottom">
                <div class="category-content__item__title__bottom__right">
                    <h1>10 وسیله نقلیه برتر در برلین</h1>
                </div>
                <div class="category-content__item__title__bottom__left">
                    <span>مرتب سازی : </span>
                    <select class="selectpicker form-control">
                        <option>توصیه میشود</option>
                        <option>توصیه میشود</option>
                        <option>توصیه میشود</option>
                    </select>
                </div>
            </div>
        </div>
        <div id="AllBussiness"></div>
        <div class="category-content__item__quastion">
            <div class="category-content__item__quastion__img">
                <img src="./assets/img/img-quastion.svg">
            </div>
            <div class="category-content__item__quastion__text">
                <h3>آیا نمی توانید تجارت را پیدا کنید؟</h3>
                <p>افزودن مشاغل به Yelp همیشه رایگان است.</p>
            </div>
            <div class="category-content__item__quastion__button">
                <a href="#">ایجاد شرکت</a>
            </div>
        </div>
        <div class="category-content__item__text">
            <p>از نتیجه راضی هستید؟ <a href="#">به ما کمک کنید Yelp را بهتر کنیم.</a></p>
        </div>
        <div class="category-content__item__more">
            <a href="#">
                نتایج بیشتر
            </a>
        </div>
        <div class="category-content__item__information">
            <h3>اطلاعات بیشتر در مورد وسایل نقلیه در برلین</h3>
            <div class="row">
                <div class="col-lg-4">
                    <div class="category-content__item__information__item">
                        <ul>
                            <li><a href="#">جزئیات خودکار</a></li>
                            <li><a href="#">جزئیات خودکار</a></li>
                            <li><a href="#">جزئیات خودکار</a></li>
                            <li><a href="#">جزئیات خودکار</a></li>
                            <li><a href="#">جزئیات خودکار</a></li>
                            <li><a href="#">جزئیات خودکار</a></li>

                        </ul>
                        <a href="#">دسته های بیشتر</a>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="category-content__item__information__item">
                        <ul>
                            <li><a href="#">جزئیات خودکار</a></li>
                            <li><a href="#">جزئیات خودکار</a></li>
                            <li><a href="#">جزئیات خودکار</a></li>
                            <li><a href="#">جزئیات خودکار</a></li>
                            <li><a href="#">جزئیات خودکار</a></li>
                            <li><a href="#">جزئیات خودکار</a></li>

                        </ul>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="category-content__item__information__item">
                        <ul>
                            <li><a href="#">جزئیات خودکار</a></li>
                            <li><a href="#">جزئیات خودکار</a></li>
                            <li><a href="#">جزئیات خودکار</a></li>
                            <li><a href="#">جزئیات خودکار</a></li>
                            <li><a href="#">جزئیات خودکار</a></li>
                            <li><a href="#">جزئیات خودکار</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="category-content__item__work">
            <h3>کارها را با Yelp انجام دهید.</h3>
            <div class="category-content__item__work__list">
                <div class="category-content__item__work__item">
                    <a href="#"><img src="./assets/img/img-work1.png"></a>
                </div>

                <div class="category-content__item__work__item">
                    <a href="#"><img src="./assets/img/img-work2.png"></a>
                </div>

                <div class="category-content__item__work__item">
                    <a href="#"><img src="./assets/img/img-work3.png"></a>
                </div>

                <div class="category-content__item__work__item">
                    <a href="#"><img src="./assets/img/img-work4.png"></a>
                </div>
                <div class="category-content__item__work__item">
                    <a href="#"><img src="./assets/img/img-work5.png"></a>
                </div>

                <div class="category-content__item__work__item">
                    <a href="#"><img src="./assets/img/img-work6.png"></a>
                </div>

                <div class="category-content__item__work__item">
                    <a href="#"><img src="./assets/img/img-work7.png"></a>
                </div>

                <div class="category-content__item__work__item">
                    <a href="#"><img src="./assets/img/img-work8.png"></a>
                </div>
            </div>
        </div>
    </div>
    <div class="category-content__map" id="weathermap"></div>
</section>
<div class="recent-activities__modal modal fade" id="click-cat" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-body">
                <div class="recent-activities__modal__close" data-dismiss="modal">
                    <span>بستن</span>

                </div>
                <div class="category-content">
                    @foreach (var item in Model.categories.Skip(4).ToList())
                    {
                        @*<p class="lbl-cat" onclick="SearchByCat(@item.Id)">@item.Name</p>*@
                        <div class="form-check">
                            <input type="checkbox" class="form-check-input" id="@item.Id">
                            <label class="form-check-label" for="@item.Id">@item.Name</label>
                        </div>
                    }
                </div>
                <button class="button-cat">جستجو</button>
            </div>

        </div>
    </div>
</div>
<button onclick=" disposeFilterForType(2)">2تست تیم آترین</button>
<button onclick=" disposeFilterForType(1)">1تست تیم آترین</button>
@section Scripts
{
    <script src="~/Designs/MainWebSite/assets/js/changeUrl.js"></script>
    
    <script>
        const markerHtmlStyles = "background-color:#000; width: 3rem; height: 3rem; display: block;  left: -1.5rem;  top: -1.5rem;  position: relative;  border-radius: 3rem 3rem 0;  transform: rotate(45deg);  border: 1px solid #FFFFFF";
        $(document).ready(function () {
            //GetData("/Search/AllBussiness?CategoryId=1058&page=1", "AllBussiness", null, 1);
            //history.pushState(null, null, "/Search/Index?CategoryId=1058&page=1");
            disposeFilterForType(1);




        });
        function SearchByCat(CategoryId) {
            //GetData("/Search/AllBussiness?CategoryId=" + CategoryId+"&page=1", "AllBussiness", null, 1);
            disposeFilterForType(1);

        }
        //var markerArray = [];
        //function GetData(ActionName, Target, Data, pageN) {
        //    $.ajax({
        //        type: "GET",
        //        data: Data,
        //        url: "" + ActionName + "",
        //        dataType: "html",
        //        success: function (data) {
        //            $('#' + Target + '').html('');
        //            $('#' + Target + '').html(data);
        //            $('#' + Target + '').show();
        //            var mymap = null;
        //            document.getElementById('weathermap').innerHTML = "<div id='mapid' style='width: 100%; height: 100%;'></div>";
        //            var planes = [];
        //            var lat = 0;
        //            var lon = 0;


        //            $('.category-content__item__cat-product').each(function (i, obj) {
        //                lat = $(this).data('assigned-lat');
        //                lon = $(this).data('assigned-lon');
        //                planes.push([$(this).data('assigned-datas'), $(this).data('assigned-lat'), $(this).data('assigned-lon'), $(this).data('assigned-count'), $(this).data('assigned-issponsor')])
        //            });

        //            mymap = L.map('mapid').setView([lat, lon], 8);
        //            L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
        //                attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
        //                maxZoom: 18,
        //                id: 'mapbox/streets-v11',
        //                tileSize: 512,
        //                zoomOffset: -1,
        //                accessToken: 'your.mapbox.access.token'
        //            }).addTo(mymap);
        //            L.NumberedDivIcon = L.Icon.extend({
        //                options: {
        //                    // EDIT THIS TO POINT TO THE FILE AT http://www.charliecroom.com/marker_hole.png (or your own marker)
        //                    iconUrl: '/Designs/MainWebSite/assets/img/location11.png',
        //                    number: '',
        //                    shadowUrl: null,
        //                    iconSize: new L.Point(25, 41),
        //                    iconAnchor: new L.Point(13, 41),
        //                    popupAnchor: new L.Point(0, -33),
        //                    /*
        //                    iconAnchor: (Point)
        //                    popupAnchor: (Point)
        //                    */
        //                    className: 'leaflet-div-icon'
        //                },
        //                createIcon: function () {
        //                    var div = document.createElement('div');
        //                    var img = this._createImg(this.options['iconUrl']);
        //                    var numdiv = document.createElement('div');
        //                    numdiv.setAttribute("class", "number");
        //                    numdiv.innerHTML = this.options['number'] || '';
        //                    div.appendChild(img);
        //                    div.appendChild(numdiv);
        //                    this._setIconStyles(div, 'icon');
        //                    return div;
        //                },
        //                createShadow: function () {
        //                    return null;
        //                }
        //            });
        //            var myIconReplc1 = L.Icon.extend({
        //                options: {
        //                    iconUrl: "/Designs/MainWebSite/assets/img/13.png",
        //                    shadowUrl: null,
        //                    iconSize: new L.Point(25, 41),
        //                    iconAnchor: new L.Point(13, 41),
        //                    popupAnchor: new L.Point(0, -33),
        //                    className: 'leaflet-div-icon'
        //                },
        //                createIcon: function () {
        //                    var div = document.createElement('div');
        //                    var img = this._createImg(this.options['iconUrl']);
        //                    var numdiv = document.createElement('div');
        //                    numdiv.setAttribute("class", "number");
        //                    numdiv.innerHTML = this.options['number'] || '';
        //                    div.appendChild(img);
        //                    div.appendChild(numdiv);
        //                    this._setIconStyles(div, 'icon');
        //                    return div;
        //                },
        //                createShadow: function () {
        //                    return null;
        //                }
        //            });
        //            for (var i = 0; i < planes.length; i++) {
        //                if (planes[i][4] == 'False') {
        //                    marker = new L.marker([planes[i][1], planes[i][2]], { icon: new L.NumberedDivIcon({ number: "&nbsp" + planes[i][3] }) })
        //                        .bindPopup(planes[i][0])
        //                        .addTo(mymap);
        //                }
        //                else {
        //                    marker = new L.marker([planes[i][1], planes[i][2]], { icon: new myIconReplc1({ number: "&nbsp" + planes[i][3] }) })
        //                        .bindPopup(planes[i][0])
        //                        .addTo(mymap);
        //                }
        //                marker.on('mouseover', function (e) {
        //                    this.openPopup();
        //                    //this.setIcon(new myIconReplc2({ number: this.options.icon.options.number }))

        //                });
        //                marker.on('mouseout', function (e) {

        //                    this.closePopup();

        //                    //this.setIcon(new myIconReplc1({ number: this.options.icon.options.number }))
        //                }); markerArray[(pageN * 10) - 10 + i] = marker;
        //            }
        //        }
        //    });
        //}


        var request = new Request('AllBussiness');

        var disposeFilterForType = (p) => {
            request.disposeFilter('/Search/AllBussiness', { CategoryId: 1058, page: p })
        }


    </script>
    <script>
    function ChangePage(page) {

        @*GetData("/Search/AllBussiness?CategoryId="+@ViewBag.CategoryId+"&page=" + page + "", "AllBussiness", null, page);
        history.pushState(null, null, "/Search/Index?CategoryId=1058&page=" + page + "");*@

        disposeFilterForType(page);
        //alert("asd")
        //debugger
    //    var markerArray = [];
    //    var mymap = null;
    //        document.getElementById('weathermap').innerHTML = "<div id='mapid' style='width: 100%; height: 100%;'></div>";
    //        var planes = [];
    //        var lat = 0;
    //        var lon = 0;


    //        $('.category-content__item__cat-product').each(function (i, obj) {
    //            lat = $(this).data('assigned-lat');
    //            lon = $(this).data('assigned-lon');
    //            planes.push([$(this).data('assigned-datas'), $(this).data('assigned-lat'), $(this).data('assigned-lon'), $(this).data('assigned-count'), $(this).data('assigned-issponsor')])
    //        });

    //        mymap = L.map('mapid').setView([lat, lon], 8);
    //        L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
    //            attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
    //            maxZoom: 18,
    //            id: 'mapbox/streets-v11',
    //            tileSize: 512,
    //            zoomOffset: -1,
    //            accessToken: 'your.mapbox.access.token'
    //        }).addTo(mymap);
    //        L.NumberedDivIcon = L.Icon.extend({
    //            options: {
    //                // EDIT THIS TO POINT TO THE FILE AT http://www.charliecroom.com/marker_hole.png (or your own marker)
    //                iconUrl: '/Designs/MainWebSite/assets/img/location11.png',
    //                number: '',
    //                shadowUrl: null,
    //                iconSize: new L.Point(25, 41),
    //                iconAnchor: new L.Point(13, 41),
    //                popupAnchor: new L.Point(0, -33),
    //                /*
    //                iconAnchor: (Point)
    //                popupAnchor: (Point)
    //                */
    //                className: 'leaflet-div-icon'
    //            },
    //            createIcon: function () {
    //                var div = document.createElement('div');
    //                var img = this._createImg(this.options['iconUrl']);
    //                var numdiv = document.createElement('div');
    //                numdiv.setAttribute("class", "number");
    //                numdiv.innerHTML = this.options['number'] || '';
    //                div.appendChild(img);
    //                div.appendChild(numdiv);
    //                this._setIconStyles(div, 'icon');
    //                return div;
    //            },
    //            createShadow: function () {
    //                return null;
    //            }
    //        });
    //        var myIconReplc1 = L.Icon.extend({
    //            options: {
    //                iconUrl: "/Designs/MainWebSite/assets/img/13.png",
    //                shadowUrl: null,
    //                iconSize: new L.Point(25, 41),
    //                iconAnchor: new L.Point(13, 41),
    //                popupAnchor: new L.Point(0, -33),
    //                className: 'leaflet-div-icon'
    //            },
    //            createIcon: function () {
    //                var div = document.createElement('div');
    //                var img = this._createImg(this.options['iconUrl']);
    //                var numdiv = document.createElement('div');
    //                numdiv.setAttribute("class", "number");
    //                numdiv.innerHTML = this.options['number'] || '';
    //                div.appendChild(img);
    //                div.appendChild(numdiv);
    //                this._setIconStyles(div, 'icon');
    //                return div;
    //            },
    //            createShadow: function () {
    //                return null;
    //            }
    //        });
    //        for (var i = 0; i < planes.length; i++) {
    //            if (planes[i][4] == 'False') {
    //                marker = new L.marker([planes[i][1], planes[i][2]], { icon: new L.NumberedDivIcon({ number: "&nbsp" + planes[i][3] }) })
    //                    .bindPopup(planes[i][0])
    //                    .addTo(mymap);
    //            }
    //            else {
    //                marker = new L.marker([planes[i][1], planes[i][2]], { icon: new myIconReplc1({ number: "&nbsp" + planes[i][3] }) })
    //                    .bindPopup(planes[i][0])
    //                    .addTo(mymap);
    //            }
    //            marker.on('mouseover', function (e) {
    //                this.openPopup();
    //                //this.setIcon(new myIconReplc2({ number: this.options.icon.options.number }))

    //            });
    //            marker.on('mouseout', function (e) {

    //                this.closePopup();

    //                //this.setIcon(new myIconReplc1({ number: this.options.icon.options.number }))
    //            }); markerArray[(page * 10) - 10 + i] = marker;
    //        }

    }
    $('.category-content__item__cat-product').each(function (i, value) {
        $(this).hover(function (e) {
            var isSponsor = $(this).data('assigned-issponsor');

            var myIconReplc = L.Icon.extend({
                options: {
                    iconUrl: "/Designs/MainWebSite/assets/img/location12.png",
                    shadowUrl: null,
                    iconSize: new L.Point(25, 41),
                    iconAnchor: new L.Point(13, 41),
                    popupAnchor: new L.Point(0, -33),
                    className: 'leaflet-div-icon'
                }
                ,
                createIcon: function () {
                    var div = document.createElement('div');

                    var img = this._createImg(this.options['iconUrl']);
                    var numdiv = document.createElement('div');
                    numdiv.setAttribute("class", "number");
                    numdiv.innerHTML = this.options['number'] || '';
                    div.appendChild(img);
                    div.appendChild(numdiv);
                    this._setIconStyles(div, 'icon');
                    return div;
                },
                createShadow: function () {
                    return null;
                }
            });
            var myIconReplcIsSponsor = L.Icon.extend({
                options: {
                    iconUrl: "/Designs/MainWebSite/assets/img/14.png",
                    shadowUrl: null,
                    iconSize: new L.Point(25, 41),
                    iconAnchor: new L.Point(13, 41),
                    popupAnchor: new L.Point(0, -33),
                    className: 'leaflet-div-icon'
                }
                ,
                createIcon: function () {
                    var div = document.createElement('div');

                    var img = this._createImg(this.options['iconUrl']);
                    var numdiv = document.createElement('div');
                    numdiv.setAttribute("class", "number");
                    numdiv.innerHTML = this.options['number'] || '';
                    div.appendChild(img);
                    div.appendChild(numdiv);
                    this._setIconStyles(div, 'icon');
                    return div;
                },
                createShadow: function () {
                    return null;
                }
            });
            if (isSponsor=='False')
                markerArray[$(this).attr('id') - 1].setIcon(new myIconReplc({ number: "&nbsp" + $(this).attr('id') }));
            else
                markerArray[$(this).attr('id') - 1].setIcon(new myIconReplcIsSponsor({ number: "&nbsp" + $(this).attr('id') }));


        }, function () {
                var isSponsor = $(this).data('assigned-issponsor');

            var myIconReplc = L.Icon.extend({
                options: {
                    iconUrl: "/Designs/MainWebSite/assets/img/location11.png",
                    shadowUrl: null,
                    iconSize: new L.Point(25, 41),
                    iconAnchor: new L.Point(13, 41),
                    popupAnchor: new L.Point(0, -33),
                    className: 'leaflet-div-icon'
                },
                createIcon: function () {
                    var div = document.createElement('div');
                    var img = this._createImg(this.options['iconUrl']);
                    var numdiv = document.createElement('div');
                    numdiv.setAttribute("class", "number");
                    numdiv.innerHTML = this.options['number'] || '';
                    div.appendChild(img);
                    div.appendChild(numdiv);
                    this._setIconStyles(div, 'icon');
                    return div;
                },
                createShadow: function () {
                    return null;
                }

            });
                var myIconReplcIsSponsor = L.Icon.extend({
                    options: {
                        iconUrl: "/Designs/MainWebSite/assets/img/13.png",
                        shadowUrl: null,
                        iconSize: new L.Point(25, 41),
                        iconAnchor: new L.Point(13, 41),
                        popupAnchor: new L.Point(0, -33),
                        className: 'leaflet-div-icon'
                    }
                    ,
                    createIcon: function () {
                        var div = document.createElement('div');

                        var img = this._createImg(this.options['iconUrl']);
                        var numdiv = document.createElement('div');
                        numdiv.setAttribute("class", "number");
                        numdiv.innerHTML = this.options['number'] || '';
                        div.appendChild(img);
                        div.appendChild(numdiv);
                        this._setIconStyles(div, 'icon');
                        return div;
                    },
                    createShadow: function () {
                        return null;
                    }
                });
                if (isSponsor == 'False')

                    markerArray[$(this).attr('id') - 1].setIcon(new myIconReplc({ number: "&nbsp" + $(this).attr('id') }));
                else
                    markerArray[$(this).attr('id') - 1].setIcon(new myIconReplcIsSponsor({ number: "&nbsp" + $(this).attr('id') }));

        });
    });


    </script>
}